<!doctype html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Anime Video Player</title>
        <link rel="stylesheet" href="styles.css" />
        <link rel="stylesheet" href="sampah.css" />
    </head>
    <body>
        <header id="header">
            <div class="center">
                <div class="logo">
                    <a href="index.html"
                        ><h1><strong>Wibu</strong>Nime</h1></a
                    >
                </div>
                <form class="srch" method="get" id="searchform">
                    <input
                        id="searchInput"
                        type="text"
                        placeholder="Cari Judul Anime"
                    />
                    <button class="btn" type="submit" id="searchButton">
                        üîç
                    </button>
                </form>
                <nav class="rgnav">
                    <label for="show-menu" class="show-menu"
                        ><span class="dashicons dashicons-menu"></span>
                        Menu</label
                    >
                    <input
                        type="checkbox"
                        id="show-menu"
                        aria-label="Mobile Navigation"
                    />
                    <ul id="menu-navbar" class="menu">
                        <li
                            id="menu-item-21"
                            class="menu-item menu-item-type-custom menu-item-object-custom current-menu-item menu-item-21"
                        >
                            <a href="index.html" aria-current="page"
                                ><span
                                    class="dashicons dashicons-admin-home"
                                ></span>
                                Home</a
                            >
                        </li>
                        <li
                            id="menu-item-89694"
                            class="menu-item menu-item-type-custom menu-item-object-custom menu-item-has-children menu-item-89694"
                        >
                            <a href="animelist.html"
                                ><span
                                    class="dashicons dashicons-arrow-down-alt2"
                                ></span>
                                Anime List</a
                            >
                        </li>

                        <li
                            id="menu-item-89694"
                            class="menu-item menu-item-type-custom menu-item-object-custom menu-item-has-children menu-item-89694"
                        >
                            <a href="genres.html"
                                ><span
                                    class="dashicons dashicons-arrow-down-alt2"
                                ></span>
                                Genres</a
                            >
                        </li>
                        <li
                            id="menu-item-89694"
                            class="menu-item menu-item-type-custom menu-item-object-custom menu-item-has-children menu-item-89694"
                        >
                            <a href="donghua.html"
                                ><span
                                    class="dashicons dashicons-arrow-down-alt2"
                                ></span>
                                Donghua</a
                            >
                        </li>
                    </ul>
                    <div class="clear"></div>
                </nav>
                <div class="theme-switch-wrapper">
                    <label class="theme-switch" for="checkbox">
                        <input type="checkbox" id="checkbox" />
                        <span class="slider round"></span>
                    </label>
                </div>
            </div>
        </header>

        
        <div id="wrap">
            <div class="clear"></div>
            <main class="content fullwdth">
                <div class="releases">
                    <h2 id="genreTitle"><div id="genre-title">
            <!-- Judul genre akan ditampilkan di sini -->
        </div></h2>
                </div>
                <div class="result">
                    <div id="a-z" class="result">
                        <ul>

        <div id="anime-list">
            <!-- Daftar anime berdasarkan genre akan ditampilkan di sini -->
        </div>
        </ul>
        </div>
        </div>
                <div class="clear"></div>
            </main>
            <<!-- Pagination Controls -->
<div id="pagination" class="pagination loadmore_button">
    <button id="prevPage" disabled>Previous</button>
    <span id="pageInfo">Page 1</span>
    <button id="nextPage">Next</button>
</div>
        </div>
        
        
        
    <!-- Footer Section -->
        <footer>
    <div class="footer-logo-container">
        <img src="naruto.jpg" class="footer-logo" alt="Footer Logo">
        <div class="footer-text">¬© 2024 Anime Hub. All rights reserved.</div>
    </div>
</footer>

        <!-- untuk foter -->
        <script>
          
            // Fungsi untuk mendapatkan query parameter dari URL
            function getQueryParam(param) {
                const urlParams = new URLSearchParams(window.location.search);
                return urlParams.get(param);
            }

            let currentPage = 1; // Halaman saat ini
const itemsPerPage = 10; // Jumlah anime per halaman
let totalPages = 1; // Total halaman (akan dihitung nanti)

// Fungsi untuk menggulir halaman kembali ke atas
function scrollToTop() {
    window.scrollTo({
        top: 0,
        behavior: "smooth" // Menggulir dengan animasi yang halus
    });
}

// Fungsi untuk memperbarui status tombol pagination
function updatePaginationControls() {
    document.getElementById("pageInfo").textContent = `Page ${currentPage} of ${totalPages}`;
    document.getElementById("prevPage").disabled = currentPage === 1;  // Hanya disable jika di halaman pertama
    document.getElementById("nextPage").disabled = currentPage === totalPages;  // Hanya disable jika di halaman terakhir
}

// Fungsi untuk memuat anime dengan pagination
async function loadAnimeByGenre() {
    const genre = getQueryParam("genre");
    const response = await fetch("animeData.json");
    const data = await response.json();

    // Filter anime berdasarkan genre
    const filteredAnime = data.filter(anime => anime.genre.includes(genre));

    totalPages = Math.ceil(filteredAnime.length / itemsPerPage); // Hitung total halaman

    const genreTitle = document.getElementById("genre-title");
    genreTitle.innerHTML = `<h1>Genre: ${genre}</h1>`;

    const animeList = document.getElementById("anime-list");
    animeList.innerHTML = "";

    if (filteredAnime.length > 0) {
        // Hitung indeks awal dan akhir untuk pagination
        const startIndex = (currentPage - 1) * itemsPerPage;
        const endIndex = startIndex + itemsPerPage;
        const animeToShow = filteredAnime.slice(startIndex, endIndex);

        animeToShow.forEach(anime => {
            const animeCard = document.createElement("div");
            animeCard.className = "anime-card";
            animeCard.innerHTML = `
                <li>
                    <div>
                        <div class="top">
                            <img src="${anime.image}" alt="${anime.title}" width="75" height="120" loading="lazy">
                            <div class="anime-title"><h2>${anime.title}</h2></div>
                            <div class="descs"><p>${anime.synopsis}</p></div>
                            <div class="anime-info">Rating: ${anime.rating}</div>
                            <div class="anime-info">Genre: ${anime.genre}</div>
                        </div>
                    </div>
                    <div class="boxinfores">
                        <span class="dashicons dashicons-star-empty"></span>
                        <span class="nilaiseries">N/A</span>
                        <span class="dashicons dashicons-desktop"></span>
                        <span class="typeseries">TV</span>
                        <span class="rsrated">Fall 2024</span>
                    </div>
                </li>
            `;

            // Event listener untuk klik kartu
            animeCard.addEventListener("click", function () {
                window.location.href = `detail.html?id=${encodeURIComponent(anime.id)}`;
            });

            animeList.appendChild(animeCard);
        });
    } else {
        animeList.innerHTML = `<p>No anime found for this genre.</p>`;
    }

    // Update pagination controls
    updatePaginationControls();
}

// Event listener untuk tombol Previous
document.getElementById("prevPage").addEventListener("click", function () {
    if (currentPage > 1) {
        currentPage--;
        loadAnimeByGenre();
        scrollToTop(); // Panggil fungsi untuk kembali ke atas
    }
});

// Event listener untuk tombol Next
document.getElementById("nextPage").addEventListener("click", function () {
    if (currentPage < totalPages) {
        currentPage++;
        loadAnimeByGenre();
        scrollToTop(); // Panggil fungsi untuk kembali ke atas
    }
});

// Panggil fungsi untuk memuat anime berdasarkan genre

// Panggil fungsi untuk memuat anime berdasarkan genreloadAnimeByGenre();
            // Ambil elemen input dan tombol pencarian
const searchInput = document.getElementById("searchInput");
const searchForm = document.getElementById("searchform");
const searchButton = document.getElementById("searchButton");

// Fungsi untuk melakukan pencarian
function performSearch() {
    const query = searchInput.value.trim();
    if (query) {
        window.location.href = `search.html?query=${encodeURIComponent(query)}`;
    }
}

// Event listener untuk klik tombol pencarian
searchButton.addEventListener("click", function (event) {
    event.preventDefault(); // Mencegah form submit default
    performSearch();
});

// Event listener untuk tekan tombol Enter di form
searchForm.addEventListener("submit", function (event) {
    event.preventDefault(); // Mencegah form submit default
    performSearch();
});


            // Panggil fungsi untuk memuat anime berdasarkan genre
            loadAnimeByGenre();
        </script>
        <script src="darkMode.js"></script>
        <script src="genre.js"></script>
    </body>
</html>
